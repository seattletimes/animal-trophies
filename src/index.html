<!doctype html>
<html>
  <head>
    <title><%= json.project.title %></title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>[ng-cloak] {display: none;}</style>
    <link rel="stylesheet" type="text/css" href="style.css">
    <%= t.include("partials/_head.html") %>
  </head>
  <body ng-app="animal-shipments">

    <responsive-child class="outmost">

      <div class="{{filter}}" ng-controller="animalController" ng-cloak>

        <div class="title">Title goes here</div>
        <div class="chatter">Every wildlife shipment through the port of Seattle in 2014:</div>

        <div class="toggle-box">
          Highlighted:
          <div ng-click="filter = 'trophies'" class="trophies toggle" ng-class="{selected: filter == 'trophies'}">All Trophies</div>
          <div ng-click="filter = 'bigfive'" class="bigfive toggle" ng-class="{selected: filter == 'bigfive'}">"Big Five"</div>
          <div ng-click="filter = 'pai'" class="pai toggle" ng-class="{selected: filter == 'pai'}">Proposed</div>
        </div>

        <div class="loading" ng-if="!monthGroups"> Loading...</div>

        <div class="month-group" ng-repeat="group in monthGroups">
          <div class="month"><span class="month-name">{{group.monthName}}</span> ({{group.shipments.length}} shipments):</div>
          <div flip-tip class="box {{::shipment.categories}} {{::shipment.animals}}" ng-repeat="shipment in group.shipments">

            <div class="tooltip">
              <div class="header">
                <div class="date">{{shipment.date}}</div>
              </div>

              <div class="components">
                <div class="component" ng-repeat="s in shipment.components">
                  <div class="name">
                    <span ng-if="s['generic_name']">{{s["specific_name"]}} {{s["generic_name"]}} </span>
                    <span ng-if="!s['generic_name']">Unknown </span>
                    <span class="category" ng-if="s.categoryName">({{s.categoryName}})</span>
                  </div>
                  <div>{{s.qty}}<span ng-if="s.unit !== 'no'"> {{s.unit}}</span> from {{s.countryName}}</div>
                </div>
              </div>
            </div>

          </div>
        </div>

      </div>

      <div class="source"><em>Source: U.S. Fish and Wildlife Service</em></div>
      <div class="credit">AUDREY CARLSEN AND THOMAS WILBURN / THE SEATTLE TIMES</div>

    </responsive-child>

    <script src="app.js" async></script>
    <% if (json.project.production) { %>
    <%= !json.project.embedded ? t.include("partials/_foot.html") : "" %>
    <%= t.include("partials/_workHere.html") %>
    <% } %>
  </body>
</html>
